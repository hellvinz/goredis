"use strict";angular.module("uiApp",["d3"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("uiApp").controller("MainCtrl",["$scope",function(a){function b(a){var b=JSON.parse(a);return b.Args=b.Args.map(atob),b.Ipaddr=atob(b.Ipaddr),b}a.redisCommands=[],a.commands=[],a.namespaces=[];var c=[],d=[],e=function(e){var f=b(e.data);a.$apply(function(){a.redisCommands.unshift(f),0==a.commands.length&&a.commands.push({values:[]});var b=f.Args[0],e=c.indexOf(b);if(-1==e?(c.push(b),a.commands[0].values.push({label:b,value:1})):a.commands[0].values[e].value+=1,f.Args.length>1){0==a.namespaces.length&&a.namespaces.push({values:[]});var g=f.Args[1].split(":");if(g.length>1){var h=g[0],e=d.indexOf(h);-1==e?(d.push(h),a.namespaces[0].values.push({label:h,value:1})):a.namespaces[0].values[e].value+=1}}})},f=new EventSource("/redis");f.addEventListener("message",e,!1),a.showCommands=!0,a.showNamespaces=!0,a.chartRenderer=function(a,b){nv.addGraph(function(){var c=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).showLabels(!0).labelThreshold(.05).height("240").width("460").donut(!0);return a.datum(b).transition().duration(1200).call(c),c})}}]);